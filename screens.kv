#:kivy 1.10
#:import Factory kivy.factory.Factory
#:import datetime datetime
#: import ListAdapter kivy.adapters.listadapter.ListAdapter
#: import ListItemButton kivy.uix.listview.ListItemButton
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import TabbedPanel kivy.uix.tabbedpanel 

<CustomListTitle@Label>:
	text_size: self.size
	font_size: 30
	bold: True
	color: 0,0,0,1

<CustomListBoxLayout@BoxLayout>:
	canvas:
	    Color:
	        rgba: 0, 0, 0, 0.8
	    Line:
	        width: 1
	        rectangle: self.x, self.y, self.width, self.height

		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size

<CustomListLabel@Label>:
	text_size: self.size
	color: 0,0,0,1
	bold: True
	padding_x: 5
	font_size: 18

<CustomListButton@Button>:
	size_hint_x: 0.1
	size_hint_y: 1.2
	canvas:
        Color:
            rgba: 0, 0, 0, 0.8
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height
	background_color: 0, 0, 0, 0.2
	color: 0,0,0,1
	bold: True

<CustomBackButton@Button>:
	text: "Back"
	canvas:
        Color:
            rgba: 0, 0, 0, 0.8
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height
	background_color: 0, 0, 0, 0.1
	color: 0,0,0,1
	bold: True

<CustomSaveButton@Button>:
	canvas:
        Color:
            rgba: 0, 0, 0, 0.8
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height
	background_color: 0, 0, 0, 0.1
	color: 0,0,0,1
	bold: True
	text: "Save"
	bold: True

<CustomCancelButton@Button>:
	canvas:
        Color:
            rgba: 0, 0, 0, 0.8
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height
	background_color: 0, 0, 0, 0.1
	color: 0,0,0,1
	text: "Cancel"
	bold: True


<CustomListRecycleGridLayout@RecycleGridLayout>:
	cols: 1
    key_selection: 'selectable'
    default_size: None, dp(35)
    default_size_hint: 1, None
    size_hint_y: None
    height: self.minimum_height
    multiselect: True
    touch_multiselect: True


<CustomGridButton@Button>:
	background_color: 0,0,0,0
	color: 0,0,0,1
	canvas:
        Color:
            rgba: 0, 0, 0, 0.8
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height
    text_size: self.size
    valign: "middle"
    padding_x: 5

<CustomerGrid@GridLayout>:
	size_hint: 1.2,1.2
	size_hint_y: 0.6
	cols:3
	CustomGridButton:
		text: root.name or ""
	    on_press: root.line_click()
	CustomGridButton:
		text: root.contact_number or ""
	CustomGridButton:
		text: root.email_address or ""

<MainPageButton@Button>:
	canvas:
        Color:
            rgba: 0, 0, 0, 0.8
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height
	background_color: 0, 0, 0, 0.2
	color: 0,0,0,1
	bold: True
	font_size: 20

<CustomBoxLayout@BoxLayout>:
	canvas:
		Color: 
		    rgba: (0,0,0,0.2) 
		Rectangle:
		    pos: self.pos
		    size: self.size

<CustomLineBoxLayout@BoxLayout>:
	canvas:
		Color:
			rgba: 0, 0, 0, 0.8
    	Line:
        	width: 1
        	rectangle: self.x, self.y, self.width, self.height

	
<MainPage>:
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		BoxLayout:
			orientation: "vertical"
			spacing: 20
			padding: 40
			MainPageButton:
				text: "Customer"
				on_press:root.manager.current= 'customer_list'
				on_press: root.manager.transition = SlideTransition(direction="left")
			MainPageButton:
				text: "Supplier"
				on_press:root.manager.current= 'supplier_list'
				on_press: root.manager.transition = SlideTransition(direction="left")
			MainPageButton:
				text: "Item"
				on_press:root.manager.current= 'item_list'
				on_press: root.manager.transition = SlideTransition(direction="left")
			MainPageButton:
				text: "Tax"
				on_press:root.manager.current= 'tax_list'
				on_press: root.manager.transition = SlideTransition(direction="left")
		BoxLayout:
			orientation: "vertical"
			spacing: 20
			padding: 40
			MainPageButton:
				text: "Sale"
				on_press:root.manager.current= 'sale_list'
				on_press: root.manager.transition = SlideTransition(direction="left")
			MainPageButton:
				text: "Purchase"
				on_press:root.manager.current= 'purchase_list'
				on_press: root.manager.transition = SlideTransition(direction="left")
			MainPageButton:
				text: "Stock"
				on_press:root.manager.current= 'stock_list'
				on_press: root.manager.transition = SlideTransition(direction="left")
			MainPageButton:
				text: "Payment"
				on_press:root.manager.current= 'payment_list'
				on_press: root.manager.transition = SlideTransition(direction="left")
				
<CustomerList>
	cust: cust
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		padding: 20
		orientation: "vertical"
		BoxLayout:
			orientation: "vertical"
			BoxLayout:
				spacing: 5
				size_hint_y: 0.06
				CustomListTitle:
					text: "Customer"
					
				CustomListButton:
					text: "Back"
					on_press:root.manager.current= 'main_page'
					on_press: root.manager.transition = SlideTransition(direction="right")
				CustomListButton:
					text: "Add New"
					on_press:root.manager.current= 'customer'
					on_press: root.manager.transition = SlideTransition(direction="left")
					
			BoxLayout:
				size_hint_y: 0.1
				CustomListLabel:
					text: "Customer Name"
					
				CustomListLabel:
					text: "Contact Number"
	
				CustomListLabel:
					text: "Contact Email"
					
			CustomListBoxLayout:
				RecycleView:
					id:cust
					viewclass: 'CustomerGrid'
					CustomListRecycleGridLayout:
		               

<CustomerLabel@Label>:
	size_hint_y: 3
	size_hint_x: 0.2
    font_size: 20
    text: "Customer Name"
    text_size: self.size
    bold: True
    color: 0,0,0,1
<CustomerTexInput@TextInput>:
	size_hint_y: 2.1
	size_hint_x: 0.2
	font_size: 20

<Customer>:
	name: name
    contact_number: contact_number
    email_address: email_address    
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		orientation: "horizontal"
		CustomBoxLayout:
			spacing: 20
			padding: 20
			orientation: "vertical"
			BoxLayout:
				size_hint_y: 0.1
				CustomBackButton:
					size_hint_x: 0.15
					size_hint_y: 1.3
					bold: True
					on_press:root.manager.current= 'customer_list'	
					on_press: root.manager.transition = SlideTransition(direction="right")
				Label:
			CustomLineBoxLayout:	
				orientation: "vertical"
				BoxLayout:
					padding:20
					size_hint_y: 1
				    Label:
						size_hint_y: 5
						size_hint_x: 0.2
				        font_size: 30
				        text: "Customer"
				        text_size: self.size
				        bold: True
				        italic: True
				        color: 0,0,0,1
				BoxLayout:
					size_hint_y: 1
					padding:20
					CustomerLabel:	
				        text: "Customer Name"	        
				    CustomerTexInput:
				    	id: name
				    	
				BoxLayout:
					padding:20
					size_hint_y: 1
					CustomerLabel:
				        text: "Contact Number"
				    CustomerTexInput:
				    	id: contact_number

				BoxLayout:
					padding:20
					size_hint_y: 1
					CustomerLabel:
				        text: "Contact Email"
				    CustomerTexInput:
				    	id: email_address

				BoxLayout:
					BoxLayout:
						size_hint_x: 0.5
					BoxLayout:
						CustomSaveButton:
		            		size_hint_y: 0.7
		            		on_press: root.save()
		            		
		            	BoxLayout:
		            	CustomCancelButton:
		            		size_hint_y: 0.7
		            		on_press: root.cancel()
		            		
		            BoxLayout:
		            	size_hint_x: 0.5
	            BoxLayout:
	            	size_hint_y: 0.2
	        BoxLayout:
				orientation: "vertical"
				size_hint_y: 1
		CustomBoxLayout:
			size_hint_x: 0.5
             

<SupplierGrid@GridLayout>:
	size_hint: 1.2,1.2
	size_hint_y: 0.6
	cols:5
	CustomGridButton:
		text: root.supplier_name or ""
	    on_press: self.parent.parent.parent.parent.parent.parent.parent.manager.current= 'supplier'
	    on_press: self.parent.parent.parent.parent.parent.parent.parent.manager.transition = SlideTransition(direction="left")
	CustomGridButton:
		text: root.address or ""
	CustomGridButton:
		text: root.tax_id_gst_no or ""
	CustomGridButton:
		text: root.contact_number or ""
	CustomGridButton:
		text: root.email or ""

<SupplierList>
	sup: sup
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		padding: 20
		orientation: "vertical"
		BoxLayout:
			orientation: "vertical"
			BoxLayout:
				spacing: 5
				size_hint_y: 0.06
				CustomListTitle:
					text: "Supplier"
					
				CustomListButton:
					text: "Back"
					on_press:root.manager.current= 'main_page'
					on_press: root.manager.transition = SlideTransition(direction="right")
				CustomListButton:
					text: "Add New"
					on_press:root.manager.current= 'supplier'
					on_press: root.manager.transition = SlideTransition(direction="left")
					
			BoxLayout:
				size_hint_y: 0.1
				CustomListLabel:
					text: "Supplier Name"				
				CustomListLabel:
					text: "Address"
				CustomListLabel:
					text: "Tax Id/GST No"
				CustomListLabel:
					text: "Contact Number"
				CustomListLabel:
					text: "Email"
					
			CustomListBoxLayout:
				RecycleView:
					id: sup
					viewclass: 'SupplierGrid'
					CustomListRecycleGridLayout:
	       
<Supplier>:
	supplier_name: supplier_name
    address: address
    tax_id_gst_no: tax_id_gst_no
    contact_number: contact_number
    email: email
	canvas:
		Color: 
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		orientation: "horizontal"
		BoxLayout:
			spacing: 20
			padding: 20
			orientation: "vertical"
			BoxLayout:
				size_hint_y: 0.05
				CustomBackButton:
					size_hint_x: 0.15
					size_hint_y: 1.5
					on_press:root.manager.current= 'supplier_list'	
					on_press: root.manager.transition = SlideTransition(direction="right")
				Label:
			CustomLineBoxLayout:
				orientation: "vertical"
				BoxLayout:
					padding: 20
					size_hint_y: 1.2
				    Label:
						size_hint_y: 10
						size_hint_x: 0.2
				        font_size: 30
				        text: "Supplier"
				        text_size: self.size
				        bold: True
				        italic: True
				        color: 0,0,0,1
				BoxLayout:
					padding: 20
					Label:
						size_hint_y: 12
						size_hint_x: 0.2
				        font_size: 20
				        text: "Supplier Name"
				        text_size: self.size
				        bold: True
				        color: 0,0,0,1
				    TextInput:
				    	id: supplier_name
				    	size_hint_y: 3.5
				    	size_hint_x: 0.2
				    	font_size: 20
				BoxLayout:
				BoxLayout:
					padding: 20
					Label:
						valign:'top'
						size_hint_y: 8
						size_hint_x: 0.2
				        font_size: 20
				        text: "Address"
				        text_size: self.size
				        bold: True
				        color: 0,0,0,1
				    TextInput:
				    	size_hint_y: 8
				    	size_hint_x: 0.2
				    	font_size: 20
				    	id: address

				BoxLayout:
					padding: 20
					Label:
						size_hint_y: 12
						size_hint_x: 0.2
						font_size: 20
				        text: "Tax Id/GST No"
				        text_size: self.size
				        bold: True
				        color: 0,0,0,1
				    TextInput:
				    	size_hint_y: 3.5
				    	size_hint_x: 0.2
				    	font_size: 20
				    	id: tax_id_gst_no
				BoxLayout:
					padding: 20
					Label:
						size_hint_y: 12
						size_hint_x: 0.2
				        font_size: 20
				        text: "Contact Number"
				        text_size: self.size
				        bold: True
				        color: 0,0,0,1
				    TextInput:
				    	size_hint_y: 3.5
				    	size_hint_x: 0.2
				    	font_size: 20
				    	id: contact_number

				BoxLayout:
					padding: 20
					Label:
						size_hint_y: 12
						size_hint_x: 0.2
				        font_size: 20
				        text: "Email"
				        text_size: self.size
				        bold: True
				        color: 0,0,0,1
				    TextInput:
				    	size_hint_y: 3.5
				    	size_hint_x: 0.2
				    	font_size: 20
				    	id: email
				BoxLayout:

				BoxLayout:
					padding: 20
					BoxLayout:
						size_hint_x: 0.4
					BoxLayout:
						CustomSaveButton:
		            		size_hint_y: 4
		            		on_press: root.save()
		            	BoxLayout:
		            	CustomCancelButton:
		            		size_hint_y: 4
		            		on_press: root.cancel()
		            BoxLayout:
		            	size_hint_x: 0.4
	            
	        BoxLayout:
				orientation: "vertical"
				size_hint_y: 0.3
        BoxLayout:
        	size_hint_x: 0.5
        	

<CustomTaxTable@GridLayout>:
	size_hint: 1.2,1.2
	size_hint_y: 0.6
	cols:3
	TextInput:
		font_size: 20
		id: tax_disription
		size_hint_x: 0.60
	TextInput:
		font_size: 20
		id: percentage
		size_hint_x: 0.20
	TextInput:
		font_size: 20
		id: amount
		size_hint_x: 0.20

<CategoryDropDown>:
    on_select:
        app.root.ids.item_screen.ids.category.text = '{}'.format(args[1])  

<ItemGrid@GridLayout>:
	size_hint: 1.2,1.2
	size_hint_y: 0.6
	cols:3
	CustomGridButton:
		text: root.item_name or ""
	    on_press: self.parent.parent.parent.parent.parent.parent.parent.manager.current= 'item'
	    on_press: self.parent.parent.parent.parent.parent.parent.parent.manager.transition = SlideTransition(direction="left")
	CustomGridButton:
		text: root.item_code or ""
	CustomGridButton:
		text: root.category or ""

<ItemList>
	itm: itm
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		padding: 20
		orientation: "vertical"
		BoxLayout:
			orientation: "vertical"
			BoxLayout:
				spacing: 5
				size_hint_y: 0.06
				CustomListTitle:
					text: "Item"
					
				CustomListButton:
					text: "Back"
					on_press:root.manager.current= 'main_page'
					on_press: root.manager.transition = SlideTransition(direction="right")
				CustomListButton:
					text: "Add New"
					on_press:root.manager.current= 'item'
					on_press: root.manager.transition = SlideTransition(direction="left")
					
			BoxLayout:
				size_hint_y: 0.1
				CustomListLabel:
					text: "Item Name"				
				CustomListLabel:
					text: "Item Code"
				CustomListLabel:
					text: "Category"
					
			CustomListBoxLayout:
				RecycleView:
					id: itm
					viewclass: 'ItemGrid'
					CustomListRecycleGridLayout:

<Item>:
	item_name: item_name
	item_code: item_code
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		orientation: "horizontal"
		padding: 20
		spacing: 20					
		BoxLayout:
			orientation: "vertical"

		    BoxLayout:
				size_hint_y: 0.05
				CustomBackButton:
					size_hint_x: 0.15
					size_hint_y: 1.5
					on_press:root.manager.current= 'item_list'	
					on_press: root.manager.transition = SlideTransition(direction="right")
				Label:
			BoxLayout:
				size_hint_y: 0.03
			CustomLineBoxLayout:
				orientation: "vertical" 
				BoxLayout:
					padding:20
					size_hint_y: 0.7
				    Label:
						size_hint_y:80
						size_hint_x: 0.2
				        font_size: 30
				        text: "Item"
				        text_size: self.size
				        bold: True
				        italic: True
				        color: 0,0,0,1
				BoxLayout:
					padding:20
					size_hint_y: 0.5
					Label:
						size_hint_y: 3
						size_hint_x: 0.2
				        font_size: 20
				        text: "Item Name"
				        text_size: self.size
				        bold: True
				        color: 0,0,0,1
				    TextInput:
				    	size_hint_y: 3
				    	size_hint_x: 0.2
				    	font_size: 20
				    	id: item_name

				BoxLayout:
					padding:20
					size_hint_y: 0.5
					Label:
						size_hint_y: 3
						size_hint_x: 0.2
				        font_size: 20
				        text: "Item Code"
				        text_size: self.size
				        bold: True
				        color: 0,0,0,1
				    TextInput:
				    	size_hint_y: 3
				    	size_hint_x: 0.2
				    	font_size: 20
				    	id: item_code

				BoxLayout:
					padding:20
					size_hint_y: 0.5
					Label:
						size_hint_y: 3
						size_hint_x: 1
				        font_size: 20
				        text: "Category"
				        text_size: self.size
				        bold: True
				        color: 0,0,0,1
				    Button:
				    	canvas:
					        Color:
					            rgba: 0, 0, 0, 0.8
					        Line:
					            width: 1
					            rectangle: self.x, self.y, self.width, self.height
						background_color: 0, 0, 0, 0.1
						color: 0,0,0,1
						size_hint_y: 3
				        id: category
				        text: 'Select'
				        on_release: Factory.CategoryDropDown().open(self)
				        size_hint_y: None
				        height: 35

				BoxLayout:
					size_hint_y: 0.4
				BoxLayout:
					padding:20
					size_hint_y: 0.2
					Label:
						text: 'Tax Discription'
						size_hint_x: 0.60
						color: 0,0,0,1
						bold: True
					Label:
						text: "Percentage"
						size_hint_x: 0.20
						color: 0,0,0,1
						bold: True
					Label:
						text: 'Amount'
						size_hint_x: 0.20
						color: 0,0,0,1
						bold: True
				BoxLayout:
					padding:20
					size_hint_y: 1.5
					RecycleView:
						viewclass: 'CustomTaxTable'
						data: [{}, {}, {},{}, {}]
						RecycleGridLayout:
			                cols: 1
			                key_selection: 'selectable'
			                default_size: None, dp(35)
			                default_size_hint: 1, None
			                size_hint_y: None
			                height: self.minimum_height
			                multiselect: True
			                touch_multiselect: True
				BoxLayout:
					padding:20
					BoxLayout:
						size_hint_x: 0.4
					BoxLayout:
						CustomSaveButton:
		            		size_hint_y: 0.65
		            		on_press: root.save()

		            	BoxLayout:
		            	CustomCancelButton:
		            		size_hint_y: 0.65
		            		on_press: root.cancel()
		            BoxLayout:
		            	size_hint_x: 0.4
		        
		    BoxLayout:
				orientation: "vertical"
				size_hint_y: 0.1
        BoxLayout:
        	size_hint_x: 0.5
        	

<TaxTypeDropDown>:
    on_select:
        app.root.ids.tax_screen.ids.tax_type.text = '{}'.format(args[1])  

<TaxGrid@GridLayout>:
	size_hint: 1.2,1.2
	size_hint_y: 0.6
	cols:3
	CustomGridButton:
		text: root.tax_name or ""
	    on_press: self.parent.parent.parent.parent.parent.parent.parent.manager.current= 'tax'
	    on_press: self.parent.parent.parent.parent.parent.parent.parent.manager.transition = SlideTransition(direction="left")
	CustomGridButton:
		text: root.tax_type or ""
	CustomGridButton:
		text: root.percentage or ""

<TaxList>
	tx: tx
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		padding: 20
		orientation: "vertical"
		BoxLayout:
			orientation: "vertical"
			BoxLayout:
				spacing: 5
				size_hint_y: 0.06
				CustomListTitle:
					text: "Tax"
					
				CustomListButton:
					text: "Back"
					on_press:root.manager.current= 'main_page'
					on_press: root.manager.transition = SlideTransition(direction="right")
				CustomListButton:
					text: "Add New"
					on_press:root.manager.current= 'tax'
					on_press: root.manager.transition = SlideTransition(direction="left")
					
			BoxLayout:
				size_hint_y: 0.1
				CustomListLabel:
					text: "Tax Name"				
				CustomListLabel:
					text: "Tax Type"
				CustomListLabel:
					text: "Percentage"
					
			CustomListBoxLayout:
				RecycleView:
					id: tx
					viewclass: 'TaxGrid'
					CustomListRecycleGridLayout:

<Tax>:
	tax_name: tax_name
	percentage: percentage
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		orientation: "horizontal"
		BoxLayout:
			orientation: "vertical"
			padding: 20
			spacing: 20
		    BoxLayout:
				size_hint_y: 0.08
				CustomBackButton:
					size_hint_x: 0.15
					size_hint_y: 1.4
					on_press:root.manager.current= 'item_list'	
					on_press: root.manager.transition = SlideTransition(direction="right")
				Label:
			CustomLineBoxLayout:
				orientation: "vertical"
				BoxLayout:
					padding: 20
					size_hint_y: 0.2
				    Label:
						size_hint_y: 4
						size_hint_x: 0.2
				        font_size: 30
				        text: "Tax"
				        text_size: self.size
				        bold: True
				        italic: True
				        color: 0,0,0,1
				BoxLayout:
					padding: 20
					orientation: "vertical"
					BoxLayout:
						size_hint_y: 0.2
						Label:
							size_hint_y: 2
							size_hint_x: 0.2
					        font_size: 20
					        text: "Tax Name"
					        text_size: self.size
					        bold: True
					        color: 0,0,0,1
					    TextInput:
					    	size_hint_y: 1.7
					    	size_hint_x: 0.2
					    	font_size: 20
					    	id: tax_name

					BoxLayout:
						size_hint_y: 0.5
						Label:
							size_hint_y: 2
							size_hint_x: 1
					        font_size: 20
					        text: "Tax Type"
					        text_size: self.size
					        bold: True
					        color: 0,0,0,1
					    Button:
					    	canvas:
						        Color:
						            rgba: 0, 0, 0, 0.8
						        Line:
						            width: 1
						            rectangle: self.x, self.y, self.width, self.height
							background_color: 0, 0, 0, 0.1
							color: 0,0,0,1
					        id: tax_type
					        text: 'Select'
					        on_release: Factory.TaxTypeDropDown().open(self)
					        size_hint_y: None
					        height: 40
				
					BoxLayout:
						size_hint_y: 0.5
						Label:
							size_hint_y: 0.35
							size_hint_x: 0.2
					        font_size: 20
					        text: "Percentage"
					        text_size: self.size
					        bold: True
					        color: 0,0,0,1
					    TextInput:
					    	size_hint_y: 0.7
					    	size_hint_x: 0.2
					    	font_size: 20
					    	id: percentage

					BoxLayout:
						BoxLayout:
							size_hint_x: 0.4
						BoxLayout:
							CustomSaveButton:
			            		size_hint_y: 0.4
			            		on_press: root.save()

			            	BoxLayout:

			            	CustomCancelButton:
			            		size_hint_y: 0.4
			            		on_press: root.cancel()
			            BoxLayout:
			            	size_hint_x: 0.4

	        BoxLayout:
				orientation: "vertical"
				size_hint_y: 0.8
        BoxLayout:
        	size_hint_x: 0.5
        	

<SaleTable@GridLayout>:
	size_hint:0.9,0.9
	cols:8
	spacing: 6
	padding: 2
	Label:
		text: root.item or ""
		color: 0,0,0,1
	Label:
		text: root.rate or ""
		color: 0,0,0,1
	TextInput:
		id: quantity
		size_hint_x: 0.5

	TextInput:
		id: discount
		size_hint_x: 0.5
	Label:
		text: root.dis or ""
		color: 0,0,0,1
	Label:
		text: root.amt or ""
		color: 0,0,0,1
	Button:
		canvas:
	        Color:
	            rgba: 0, 0, 0, 0.8
	        Line:
	            width: 1
	            rectangle: self.x, self.y, self.width, self.height
		background_color: 0, 0, 0, 0
		color: 0,0,0,1
		size_hint_x: 0.5
		text: 'Edit'
		on_release: print(app.self.index)
	Button:
		canvas:
	        Color:
	            rgba: 0, 0, 0, 0.8
	        Line:
	            width: 1
	            rectangle: self.x, self.y, self.width, self.height
		background_color: 0, 0, 0, 0
		color: 0,0,0,1
		size_hint_x: 0.5
		text: 'Delete'

<CustomerDropDown>:
    on_select:
        app.root.ids.sale_screen.ids.customer.text = '{}'.format(args[1]) 

<SaleGrid@GridLayout>:
	size_hint: 1.2,1.2
	size_hint_y: 0.6
	cols:2
	CustomGridButton:
		text: root.customer_name or ""
	    on_press: self.parent.parent.parent.parent.parent.parent.parent.manager.current= 'sale'
	    on_press: self.parent.parent.parent.parent.parent.parent.parent.manager.transition = SlideTransition(direction="left")
	CustomGridButton:
		text: root.total or ""
	

<SaleList>
	sallist: sallist
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		padding: 20
		orientation: "vertical"
		BoxLayout:
			orientation: "vertical"
			BoxLayout:
				spacing: 5
				size_hint_y: 0.06
				CustomListTitle:
					text: "Sale"
					
				CustomListButton:
					text: "Back"
					on_press:root.manager.current= 'main_page'
					on_press: root.manager.transition = SlideTransition(direction="right")
				CustomListButton:
					text: "Add New"
					on_press:root.manager.current= 'sale'
					on_press: root.manager.transition = SlideTransition(direction="left")
					
			BoxLayout:
				size_hint_y: 0.1
				CustomListLabel:
					text: "Customer Name"				
				CustomListLabel:
					text: "Total"
				
			CustomListBoxLayout:
				RecycleView:
					id: sallist
					viewclass: 'SaleGrid'
					CustomListRecycleGridLayout:
<Sale>:
	sal: sal
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		orientation: "horizontal"
		padding: 20 
		spacing: 20
		BoxLayout:
			orientation: "vertical"
		    BoxLayout:
				size_hint_y: 0.05
				CustomBackButton:
					size_hint_x: 0.15
					size_hint_y: 1.3
					bold: True
					on_press:root.manager.current= 'sale_list'	
					on_press: root.manager.transition = SlideTransition(direction="right")

				Label:
				Button:
					text: '+'
					size_hint_x: 0.15
					size_hint_y: 1.3
					on_press: root.add_screen()
			BoxLayout:
				size_hint_y: 0.03
			SaleTab:
				do_default_tab: False
		        background_color: (0,0,0,0.1)    # White colour
		        border: [0, 0, 0, 0]
		        tab_width: self.parent.width / 12
		        TabbedPanelItem:
		        	background_color: (0,0,0,0.1)
		        	color: (0,0,0,2)
		        	canvas:
				        Color:
				            rgba: 0, 0, 0, 1
				        Line:
				            width: 1
				            rectangle: self.x, self.y, self.width, self.height
        		    text: 'Screen1'
					CustomLineBoxLayout:
						orientation: "vertical"
						BoxLayout:
							padding: 20
							size_hint_y: 0.12
						    Label:
								size_hint_y: 3
								size_hint_x: 0.2
						        font_size: 30
						        text: "sale"
						        text_size: self.size
						        bold: True
						        italic: True
						        color: 0,0,0,1

						BoxLayout:
							padding: 20
							orientation: "vertical"
						    BoxLayout:
						    	size_hint_y: 0.03
								Label:
									size_hint_y: 4
									size_hint_x: 0.2
							        font_size: 20
							        text: "Date:"
							        text_size: self.size
							        bold: True
							        color: 0,0,0,1
							    Label:
									size_hint_y: 4
									size_hint_x: 0.2
							        font_size: 20
							        text: str(datetime.datetime.now().strftime("%d-%m-%y"))
							        text_size: self.size
							        bold: True
							        color: 0,0,0,1
							    BoxLayout:
							    	size_hint_x: 0.3
							    Label:
									size_hint_y: 4
									size_hint_x: 0.2
							        font_size: 20
							        text: "Time:"
							        text_size: self.size
							        bold: True
							        color: 0,0,0,1
							    Label:
									size_hint_y: 4
									size_hint_x: 0.2
							        font_size: 20
							        text: root.tm or ""
							        text_size: self.size
							        bold: True
							        color: 0,0,0,1
							BoxLayout:
								size_hint_y: 0.25
								Label:
									size_hint_y: 0.50
									size_hint_x: 1
							        font_size: 20
							        text: "Customer"
							        text_size: self.size
							        bold: True
							        color: 0,0,0,1
							    Button:
							    	canvas:
								        Color:
								            rgba: 0, 0, 0, 0.8
								        Line:
								            width: 1
								            rectangle: self.x, self.y, self.width, self.height
									background_color: 0, 0, 0, 0.1
									color: 0,0,0,1
							        id: customer
							        text: 'Select'
							        on_release: Factory.CustomerDropDown().open(self)
							        size_hint_y: None
							        height: 35
							    BoxLayout:
							BoxLayout:
								size_hint_y: 0.25
								Label:
									size_hint_y: 0.50
									size_hint_x: 1
							        font_size: 20
							        text: "Item"
							        text_size: self.size
							        bold: True
							        color: 0,0,0,1
								TextInput:
									id: item
									size_hint_y: 0.65
							    	font_size: 20
							    BoxLayout:
							BoxLayout:
								size_hint_y: 0.1
							BoxLayout:
								size_hint_y: 0.05
								Label:
									text: 'Item Code '
									font_size: 15
									color: 0,0,0,1
									bold: True
								Label:
									text: "Rate"
									font_size: 15
									color: 0,0,0,1
									bold: True
								Label:
									text: "Qty"
									font_size: 15
									color: 0,0,0,1
									bold: True
									size_hint_x: 0.5
								Label:
									text: 'Discount%'
									font_size: 15
									color: 0,0,0,1
									bold: True
									size_hint_x: 0.5
								Label:
									text: "Discount"
									font_size: 15
									color: 0,0,0,1
									bold: True
								Label:
									text: 'Amount'
									font_size: 15
									color: 0,0,0,1
									bold: True
								Label:
									size_hint_x: 0.5
								Label:
									size_hint_x: 0.5
							BoxLayout:
								size_hint_y: 0.05
							BoxLayout:
								canvas:
							        Color:
							            rgba: 0, 0, 0, 0.8
							        Line:
							            width: 1
							            rectangle: self.x, self.y, self.width, self.height
							
									Color:
									    rgba: (1,1,1,1) 
									Rectangle:
									    pos: self.pos
									    size: self.size
								size_hint_y: 0.7
								RecycleView:
									id: sal
									viewclass: 'SaleTable'
									RecycleGridLayout:
						                cols: 1
						                key_selection: 'selectable'
						                default_size: None, dp(35)
						                default_size_hint: 1, None
						                size_hint_y: None
						                height: self.minimum_height
						                multiselect: True
						                touch_multiselect: True
						    BoxLayout:
								size_hint_y: 0.1
							BoxLayout:
								size_hint_y: 0.5
								BoxLayout:
									size_hint_x: 1.2
								BoxLayout:
									BoxLayout:
										orientation: "vertical"
										Label:
											text: 'Sub Total'
											font_size: 15
											color: 0,0,0,1
											bold: True
											text_size: self.size
											size_hint_y: 0.05
										Label:
											text: 'Disc.'
											font_size: 15
											color: 0,0,0,1
											bold: True
											text_size: self.size
											size_hint_y: 0.1
										Label:
											text: 'Tax'
											font_size: 15
											color: 0,0,0,1
											bold: True
											text_size: self.size
											size_hint_y: 0.1
										Label:
											text: "Total"
											font_size: 15
											color: 0,0,0,1
											bold: True
											text_size: self.size
											size_hint_y: 0.1
										
									BoxLayout:
										orientation: "vertical"
										Label:
											text: "554"
											font_size: 15
											color: 0,0,0,1
											bold: True
											text_size: self.size
											size_hint_y: 0.05
										Label:
											size_hint_y: 0.04
										TextInput:
											text: 
											font_size: 15
											text_size: self.size
											size_hint_y: 0.08
											size_hint_x: 0.4
										Label:
											text: "45454"
											font_size: 15
											color: 0,0,0,1
											bold: True
											text_size: self.size
											size_hint_y: 0.1
										Label:
											text: "45745"
											font_size: 15
											color: 0,0,0,1
											bold: True
											text_size: self.size
											size_hint_y: 0.1

							BoxLayout:
								size_hint_y: 0.1			
							BoxLayout:
								size_hint_y: 0.15
								BoxLayout:
									size_hint_x: 1.5
								Button:
									canvas:
								        Color:
								            rgba: 0, 0, 0, 0.8
								        Line:
								            width: 1
								            rectangle: self.x, self.y, self.width, self.height
			    					background_color: 0, 0, 0, 0.1
			    					color: 0,0,0,1
				            		text: "Submit"
				            		size_hint_y: 1.1
				            		bold: True
				            		on_press: root.show_popup()
				            	BoxLayout:
				            	BoxLayout:
				            		
					            	CustomCancelButton:
					            		size_hint_y: 1.2
					            		on_press:
				            	BoxLayout:
				            		size_hint_x: 1.5

				

		BoxLayout:
        	size_hint_x: 0.5
        	

<PurchaseTable@GridLayout>:
	size_hint:0.9,0.9
	cols:8
	spacing: 6
	padding: 2
	Label:
		text: root.item or ""
		color: 0,0,0,1
	Label:
		text: root.rate or ""
		color: 0,0,0,1
	TextInput:
		id: quantity
		size_hint_x: 0.5
	TextInput:
		id: discount
		size_hint_x: 0.5
	Label:
		text: root.dis or ""
		color: 0,0,0,1
	Label:
		text: root.amt or ""
		color: 0,0,0,1
	Button:
		canvas:
	        Color:
	            rgba: 0, 0, 0, 0.8
	        Line:
	            width: 1
	            rectangle: self.x, self.y, self.width, self.height
		background_color: 0, 0, 0, 0
		color: 0,0,0,1
		size_hint_x: 0.5
		text: 'Edit'
		on_release: print(app.self.index)
	Button:
		canvas:
	        Color:
	            rgba: 0, 0, 0, 0.8
	        Line:
	            width: 1
	            rectangle: self.x, self.y, self.width, self.height
		background_color: 0, 0, 0, 0
		color: 0,0,0,1
		size_hint_x: 0.5
		text: 'Delete'

<SupplierDropDown>:
    on_select:
        app.root.ids.purchase_screen.ids.supplier.text = '{}'.format(args[1]) 

<PurchaseGrid@GridLayout>:
	size_hint: 1.2,1.2
	size_hint_y: 0.6
	cols:2
	CustomGridButton:
		text: root.supplier_name or ""
	    on_press: self.parent.parent.parent.parent.parent.parent.parent.manager.current= 'purchase'
	    on_press: self.parent.parent.parent.parent.parent.parent.parent.manager.transition = SlideTransition(direction="left")
	CustomGridButton:
		text: root.total or ""
	

<PurchaseList>
	purlist: purlist
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		padding: 20
		orientation: "vertical"
		BoxLayout:
			orientation: "vertical"
			BoxLayout:
				spacing: 5
				size_hint_y: 0.06
				CustomListTitle:
					text: "Purchase"
					
				CustomListButton:
					text: "Back"
					on_press:root.manager.current= 'main_page'
					on_press: root.manager.transition = SlideTransition(direction="right")
				CustomListButton:
					text: "Add New"
					on_press:root.manager.current= 'purchase'
					on_press: root.manager.transition = SlideTransition(direction="left")
					
			BoxLayout:
				size_hint_y: 0.1
				CustomListLabel:
					text: "Supplier Name"				
				CustomListLabel:
					text: "Total"
				
			CustomListBoxLayout:
				RecycleView:
					id: purlist
					viewclass: 'PurchaseGrid'
					CustomListRecycleGridLayout:
<Purchase>:
	pur: pur
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		orientation: "horizontal"
		padding: 20
		spacing: 20
		BoxLayout:
			orientation: "vertical"
		    BoxLayout:
				size_hint_y: 0.05
				CustomBackButton:
					size_hint_x: 0.15
					size_hint_y: 1.3
					bold: True
					on_press:root.manager.current= 'purchase_list'	
					on_press: root.manager.transition = SlideTransition(direction="right")
				Label:
			BoxLayout:
				size_hint_y: 0.03
			CustomLineBoxLayout:
				orientation: "vertical"
				BoxLayout:
					padding: 20
					size_hint_y: 0.12
				    Label:
						size_hint_y: 3
						size_hint_x: 0.2
				        font_size: 30
				        text: "Purchase"
				        text_size: self.size
				        bold: True
				        italic: True
				        color: 0,0,0,1
				BoxLayout:
					padding: 20
					orientation: "vertical"
				    BoxLayout:
				    	size_hint_y: 0.05
						Label:
							size_hint_y: 3
							size_hint_x: 0.2
					        font_size: 20
					        text: "Date:"
					        text_size: self.size
					        bold: True
					        color: 0,0,0,1
					    Label:
							size_hint_y: 3
							size_hint_x: 0.2
					        font_size: 20
					        text: str(datetime.datetime.now().strftime("%d-%m-%y"))
					        text_size: self.size
					        bold: True
					        color: 0,0,0,1
					    BoxLayout:
					    	size_hint_x: 0.3
					    Label:
							size_hint_y: 3
							size_hint_x: 0.2
					        font_size: 20
					        text: "Time:"
					        text_size: self.size
					        bold: True
					        color: 0,0,0,1
					    Label:
							size_hint_y: 3
							size_hint_x: 0.2
					        font_size: 20
					        text: root.tm or "" 
					        text_size: self.size
					        bold: True
					        color: 0,0,0,1
					BoxLayout:
						size_hint_y: 0.2
						Label:
							size_hint_y: 3
							size_hint_x: 1
					        font_size: 20
					        text: "Supplier"
					        text_size: self.size
					        bold: True
					        color: 0,0,0,1
					    Button:
					    	canvas:
						        Color:
						            rgba: 0, 0, 0, 0.8
						        Line:
						            width: 1
						            rectangle: self.x, self.y, self.width, self.height
							background_color: 0, 0, 0, 0.1
							color: 0,0,0,1
					        id: supplier
					        text: 'Select'
					        on_release: Factory.SupplierDropDown().open(self)
					        size_hint_y: None
					        height: 35
					    BoxLayout:
					BoxLayout:
						size_hint_y: 0.2
						Label:
							size_hint_y: 0.8
							size_hint_x: 1
					        font_size: 20
					        text: "Item"
					        text_size: self.size
					        bold: True
					        color: 0,0,0,1
						TextInput:
							id: item
							size_hint_y: 0.60
					    	font_size: 20
					    	size_hint_y: 0.7
					    BoxLayout:
					BoxLayout:
						size_hint_y: 0.1
					BoxLayout:
						size_hint_y: 0.05
						Label:
							text: 'Item Code '
							font_size: 15
							color: 0,0,0,1
							bold: True
						Label:
							text: "Rate"
							font_size: 15
							color: 0,0,0,1
							bold: True
						Label:
							text: "Qty"
							font_size: 15
							color: 0,0,0,1
							bold: True
							size_hint_x: 0.5
						Label:
							text: 'Discount%'
							font_size: 15
							color: 0,0,0,1
							bold: True
							size_hint_x: 0.5
						Label:
							text: "Discount"
							font_size: 15
							color: 0,0,0,1
							bold: True
						Label:
							text: 'Amount'
							font_size: 15
							color: 0,0,0,1
							bold: True
						Label:
							size_hint_x: 0.5
						Label:
							size_hint_x: 0.5
					BoxLayout:
						size_hint_y: 0.05
					BoxLayout:
						canvas:
					        Color:
					            rgba: 0, 0, 0, 0.8
					        Line:
					            width: 1
					            rectangle: self.x, self.y, self.width, self.height
					   
							Color:
							    rgba: (1,1,1,1) 
							Rectangle:
							    pos: self.pos
							    size: self.size
						size_hint_y: 0.5
						RecycleView:
							id: pur
							viewclass: 'PurchaseTable'
							data: [{},{},{},{},{},{},{},{},{},{},{},{},{}]
							RecycleGridLayout:
				                cols: 1
				                key_selection: 'selectable'
				                default_size: None, dp(35)
				                default_size_hint: 1, None
				                size_hint_y: None
				                height: self.minimum_height
				                multiselect: True
				                touch_multiselect: True
				    BoxLayout:
						size_hint_y: 0.1
					BoxLayout:
						size_hint_y: 0.5
						BoxLayout:
							BoxLayout:
								orientation: "vertical"
								Label:
									text: 'Delivery Date'
									font_size: 15
									color: 0,0,0,1
									bold: True
									text_size: self.size
									size_hint_y: 0.3
								Label:
									text: 'Delivery Time'
									font_size: 15
									color: 0,0,0,1
									bold: True
									text_size: self.size
									size_hint_y: 0.3
								Label:
									size_hint_y: 0.2
								Label:
									valign: 'top'
									text: 'Notes'
									font_size: 15
									color: 0,0,0,1
									bold: True
									text_size: self.size
							BoxLayout:
								orientation: "vertical"
								DatePicker:
									pHint: 0.2,0.3
									font_size: 15
									text_size: self.size
									size_hint_y: 0.4
									size_hint_x: 0.8
								Label:
									size_hint_y: 0.1
								TextInput: 
									font_size: 15
									text_size: self.size
									size_hint_y: 0.4
									size_hint_x: 0.8
								Label:
									size_hint_y: 0.1
								TextInput:
									font_size: 15
									text_size: self.size
									size_hint_x: 0.8
							BoxLayout:
								size_hint_x: 0.2

						BoxLayout:
							size_hint_x: 0.1		
						BoxLayout:
							size_hint_x: 0.6
							BoxLayout:
								orientation: "vertical"
								Label:
									text: 'Sub Total'
									font_size: 15
									color: 0,0,0,1
									bold: True
									text_size: self.size
									size_hint_y: 0.05
								Label:
									text: 'Disc.'
									font_size: 15
									color: 0,0,0,1
									bold: True
									text_size: self.size
									size_hint_y: 0.1
								Label:
									text: 'tax'
									font_size: 15
									color: 0,0,0,1
									bold: True
									text_size: self.size
									size_hint_y: 0.1
								Label:
									text: "Total"
									font_size: 15
									color: 0,0,0,1
									bold: True
									text_size: self.size
									size_hint_y: 0.1
								Label:
									size_hint_y: 0.1
							BoxLayout:
								orientation: "vertical"
								Label:
									text: "554"
									font_size: 15
									color: 0,0,0,1
									bold: True
									text_size: self.size
									size_hint_y: 0.05
								Label:
									size_hint_y: 0.04
								TextInput:
									text: 
									font_size: 15
									text_size: self.size
									size_hint_y: 0.09
									size_hint_x: 0.5
								Label:
									text: "45454"
									font_size: 15
									color: 0,0,0,1
									bold: True
									text_size: self.size
									size_hint_y: 0.1
								Label:
									text: "45745"
									font_size: 15
									color: 0,0,0,1
									bold: True
									text_size: self.size
									size_hint_y: 0.1
								Label:
									size_hint_y: 0.1
					BoxLayout:
						size_hint_y: 0.1			
					BoxLayout:
						size_hint_y: 0.15
						BoxLayout:
							size_hint_x: 1.5
						Button:
							canvas:
						        Color:
						            rgba: 0, 0, 0, 0.8
						        Line:
						            width: 1
						            rectangle: self.x, self.y, self.width, self.height
	    					background_color: 0, 0, 0, 0.1
	    					color: 0,0,0,1
		            		text: "Submit"
		            		size_hint_y: 1.1
		            		bold: True
		            		on_press: root.show_popup()
		            	BoxLayout:
		            	BoxLayout:
		            		
			            	CustomCancelButton:
			            		size_hint_y: 1.1
			            		on_press:
		            	BoxLayout:
		            		size_hint_x: 1.5
															
		BoxLayout:
        	size_hint_x: 0.5
        	

<ItemCodeDropDown>:
    on_select:
        app.root.ids.stock_screen.ids.item_code.text = '{}'.format(args[1])  

<StockGrid@GridLayout>:
	size_hint: 1.2,1.2
	size_hint_y: 0.6
	cols:3
	CustomGridButton:
		text: root.item_code or ""
	    on_press: self.parent.parent.parent.parent.parent.parent.parent.manager.current= 'stock'
	    on_press: self.parent.parent.parent.parent.parent.parent.parent.manager.transition = SlideTransition(direction="left")
	CustomGridButton:
		text: root.stock or ""
	

<StockList>
	sto: sto
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		padding: 20
		orientation: "vertical"
		BoxLayout:
			orientation: "vertical"
			BoxLayout:
				spacing: 5
				size_hint_y: 0.06
				CustomListTitle:
					text: "Stock"
					
				CustomListButton:
					text: "Back"
					on_press:root.manager.current= 'main_page'
					on_press: root.manager.transition = SlideTransition(direction="right")
				CustomListButton:
					text: "Add New"
					on_press:root.manager.current= 'stock'
					on_press: root.manager.transition = SlideTransition(direction="left")
					
			BoxLayout:
				size_hint_y: 0.1
				CustomListLabel:
					text: "Item Code"				
				CustomListLabel:
					text: "Stock"
					
			CustomListBoxLayout:
				RecycleView:
					id: sto
					viewclass: 'StockGrid'
					CustomListRecycleGridLayout:


<Stock>:
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		orientation: "horizontal"
		BoxLayout:
			orientation: "vertical"
			padding: 20
			spacing: 20
		    BoxLayout:
				size_hint_y: 0.07
				CustomBackButton:
					size_hint_x: 0.15
					size_hint_y: 1.5
					on_press:root.manager.current= 'stock_list'	
					on_press: root.manager.transition = SlideTransition(direction="right")
				Label:
			CustomLineBoxLayout:
				orientation: "vertical"
				BoxLayout:
					padding: 20
					size_hint_y: 0.20
				    Label:
						size_hint_y: 4
						size_hint_x: 0.2
				        font_size: 30
				        text: "Stock"
				        text_size: self.size
				        bold: True
				        italic: True
				        color: 0,0,0,1
				BoxLayout:
					padding: 20
					orientation: "vertical"
				    BoxLayout:
				    	size_hint_y: 0.05
						Label:
							size_hint_y: 2
							size_hint_x: 0.2
					        font_size: 20
					        text: "Date:"
					        text_size: self.size
					        bold: True
					        color: 0,0,0,1
					    Label:
							size_hint_y: 2
							size_hint_x: 0.2
					        font_size: 20
					        text: str(datetime.datetime.now().strftime("%d-%m-%y"))
					        text_size: self.size
					        bold: True
					        color: 0,0,0,1
					    BoxLayout:
					    	size_hint_x: 0.3
					    Label:
							size_hint_y: 2
							size_hint_x: 0.2
					        font_size: 20
					        text: "Time:"
					        text_size: self.size
					        bold: True
					        color: 0,0,0,1
					    Label:
							size_hint_y: 2
							size_hint_x: 0.2
					        font_size: 20
					        text: root.tm or ""
					        text_size: self.size
					        bold: True
					        color: 0,0,0,1
					
					BoxLayout:
						size_hint_y: 0.2
						Label:
							text: 'Item Code '
							font_size: 20
							color: 0,0,0,1
							bold: True
						Label:
							id: current_stock
							text: "Current Stock"
							font_size: 20
							color: 0,0,0,1
							bold: True
						Label:
							text: 'Revised Stock'
							font_size: 20
							color: 0,0,0,1
							bold: True

					BoxLayout:
						size_hint_y: 0.1
						Button:
							canvas:
						        Color:
						            rgba: 0, 0, 0, 0.8
						        Line:
						            width: 1
						            rectangle: self.x, self.y, self.width, self.height
							background_color: 0, 0, 0, 0.1
							color: 0,0,0,1
					        id: item_code
					        text: 'Select Item Code'
					        on_release: Factory.ItemCodeDropDown().open(self)
					        size_hint_y: None
					        height: 37
						Label:
							text: "50"
							size_hint_y: 0.50
							font_size: 20
							color: 0,0,0,1
							bold: True
						TextInput:
							id: revised_stock
							size_hint_y: 0.60
					    	font_size: 20
					    	halign: 'top'
					    	size_hint_y: 1
					BoxLayout:
						size_hint_y: 0.2
					BoxLayout:
						size_hint_y: 0.1
						BoxLayout:
							BoxLayout:
								size_hint_x: 1.5
							Button:
								canvas:
							        Color:
							            rgba: 0, 0, 0, 0.8
							        Line:
							            width: 1
							            rectangle: self.x, self.y, self.width, self.height
		    					background_color: 0, 0, 0, 0.1
		    					color: 0,0,0,1
			            		text: "Submit"
			            		size_hint_y: 1.1
			            		bold: True
			            		on_press:
			            	BoxLayout:
			            	BoxLayout:
			            		
				            	CustomCancelButton:
				            		size_hint_y: 1.2
				            		on_press:
			            	BoxLayout:
			            		size_hint_x: 1.5
			BoxLayout:
				orientation: "vertical"
				size_hint_y: 0.8
        BoxLayout:
        	size_hint_x: 0.4
        	

<PaymentTypeDropDown>:
    on_select:
        app.root.ids.payment_screen.ids.payment_type.text = '{}'.format(args[1])  

<PaymentModeDropDown>:
    on_select:
        app.root.ids.payment_screen.ids.payment_mode.text = '{}'.format(args[1])  
<PaymentGrid@GridLayout>:
	size_hint: 1.2,1.2
	size_hint_y: 0.6
	cols:5
	CustomGridButton:
		text: root.transaction_ref  or ""
	    on_press: self.parent.parent.parent.parent.parent.parent.parent.manager.current= 'payment'
	    on_press: self.parent.parent.parent.parent.parent.parent.parent.manager.transition = SlideTransition(direction="left")
	CustomGridButton:
		text: root.card_four_digit or ""
	CustomGridButton:
		text: root.amount or ""
	CustomGridButton:
		text: root.payment_type or ""
	CustomGridButton:
		text: root.mode_of_payment or ""

<PaymentList>
	pay: pay
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		padding: 20
		orientation: "vertical"
		BoxLayout:
			orientation: "vertical"
			BoxLayout:
				spacing: 5
				size_hint_y: 0.06
				CustomListTitle:
					text: "Payment"
					
				CustomListButton:
					text: "Back"
					on_press:root.manager.current= 'main_page'
					on_press: root.manager.transition = SlideTransition(direction="right")
				CustomListButton:
					text: "Add New"
					on_press:root.manager.current= 'payment'
					on_press: root.manager.transition = SlideTransition(direction="left")
					
			BoxLayout:
				size_hint_y: 0.1
				CustomListLabel:
					text: "Transaction Reference"				
				CustomListLabel:
					text: "Card Four Digit"
				CustomListLabel:
					text: "Amount"
				CustomListLabel:
					text: "Payment Type"
				CustomListLabel:
					text: "Mode od Payment"
					
			CustomListBoxLayout:
				RecycleView:
					id: pay
					viewclass: 'PaymentGrid'
					CustomListRecycleGridLayout:

<CustomPaymentDateTimeLabel@Label>:
	size_hint_y: 3.5
	size_hint_x: 0.2
    font_size: 20
    text_size: self.size
    bold: True
    color: 0,0,0,1

<CustomPaymentLabel@Label>:
	size_hint_y: 0.35
    font_size: 20
    text_size: self.size
    bold: True
    color: 0,0,0,1

<CustomePaymentButton@Button>:
	canvas:
        Color:
            rgba: 0, 0, 0, 0.8
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height
	background_color: 0, 0, 0, 0.1
	color: 0,0,0,1
    text: 'Select'
    size_hint_y: None
    height: 40

<Payment>:
	transaction_ref: transaction_ref
	card_four_digit: card_four_digit
	amount: amount
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		orientation: "horizontal"
		padding: 20
		spacing: 20
		BoxLayout:
			orientation: "vertical"
		    BoxLayout:
				size_hint_y: 0.05
				CustomBackButton:
					size_hint_x: 0.15
					size_hint_y: 1.5
					bold: True
					on_press:root.manager.current= 'payment_list'	
					on_press: root.manager.transition = SlideTransition(direction="right")
				Label:
			BoxLayout:
				size_hint_y: 0.03
			CustomLineBoxLayout: 
				orientation: "vertical"
				BoxLayout:
					padding: 20
					size_hint_y: 0.14
				    Label:
						size_hint_y: 3
						size_hint_x: 0.2
				        font_size: 30
				        text: "Payment"
				        text_size: self.size
				        bold: True
				        italic: True
				        color: 0,0,0,1
				BoxLayout:
					padding: 20
					orientation: "vertical"
				    BoxLayout:
				    	size_hint_y: 0.1
						CustomPaymentDateTimeLabel:
					        text: "Date:"
					    CustomPaymentDateTimeLabel:
					        text: str(datetime.datetime.now().strftime("%d-%m-%y"))
					    CustomPaymentDateTimeLabel:
					        text: "Time"
					    CustomPaymentDateTimeLabel:
					        text: root.tm or ""
					BoxLayout:
						CustomPaymentLabel:
							size_hint_x: 0.2
					        text: "Trasaction Ref."
					    TextInput:
					    	size_hint_y: 0.60
					    	size_hint_x: 0.2
					    	font_size: 20
					    	id: transaction_ref

					BoxLayout:
						CustomPaymentLabel:
							size_hint_x: 1
					        text: "Payment Type"
					    CustomePaymentButton:
					        id: payment_type
					        on_release: Factory.PaymentTypeDropDown().open(self)

					BoxLayout:
						CustomPaymentLabel:
							size_hint_x: 1
					        text: "Mode Of Payment"
					    CustomePaymentButton:
					        id: payment_mode
					        text: 'Select'
					        on_release: Factory.PaymentModeDropDown().open(self)
					    
					BoxLayout:
						CustomPaymentLabel:
							size_hint_x: 0.2
					        text: "Card Four Digits"
					    TextInput:
					    	size_hint_y: 0.60
					    	size_hint_x: 0.2
					    	font_size: 20
					    	id: card_four_digit
					BoxLayout:
						CustomPaymentLabel:
							size_hint_x: 0.2
					        text: "Amount"
					    TextInput:
					    	size_hint_y: 0.60
					    	size_hint_x: 0.2
					    	font_size: 20
					    	id: amount
					BoxLayout:
						size_hint_y: 0.4
					BoxLayout:
						size_hint_y: 1
						BoxLayout:
							size_hint_x: 0.5
						BoxLayout:
							CustomSaveButton:
			            		size_hint_y: 0.7
			            		on_press: root.save()

			            	BoxLayout:
			            	CustomCancelButton:
			            		size_hint_y: 0.7
			            		on_press: root.cancel()
			            BoxLayout:
			            	size_hint_x: 0.5

	        BoxLayout:
				orientation: "vertical"
				size_hint_y: 0.3
        BoxLayout:
        	size_hint_x: 0.5

<PaymentPopup>:
	BoxLayout:
		canvas:
			Color:
			    rgba: (1,1,1,1) 
			Rectangle:
			    pos: self.pos
			    size: self.size
		CustomBoxLayout:
			orientation: "horizontal"
			padding: 20
			spacing: 20
			BoxLayout:
				orientation: "vertical"
			    BoxLayout:
					size_hint_y: 0.05
					CustomBackButton:
						size_hint_x: 0.15
						size_hint_y: 1.4
						bold: True	
						on_press: root.dismiss()
					Label:
				BoxLayout:
					size_hint_y: 0.03
				CustomLineBoxLayout: 
					orientation: "vertical"
					
					BoxLayout:
						padding: 20
						orientation: "vertical"
					    BoxLayout:
					    	size_hint_y: 0.1
							CustomPaymentDateTimeLabel:
						        text: "Date:"
						    CustomPaymentDateTimeLabel:
						        text: str(datetime.datetime.now().strftime("%d-%m-%y"))
						    CustomPaymentDateTimeLabel:
						        text: "Time"
						    CustomPaymentDateTimeLabel:
						        text: root.tm or ""
						BoxLayout:
							CustomPaymentLabel:
								size_hint_x: 0.2
						        text: "Trasaction Ref."
						    TextInput:
						    	size_hint_y: 0.55
						    	size_hint_x: 0.2
						    	font_size: 20
						    	id: transaction_ref

						BoxLayout:
							CustomPaymentLabel:
								size_hint_x: 1
						        text: "Payment Type"
						    CustomePaymentButton:
						        id: payment_type
						        on_release: Factory.PaymentTypeDropDown().open(self)

						BoxLayout:
							CustomPaymentLabel:
								size_hint_x: 1
						        text: "Mode Of Payment"
						    CustomePaymentButton:
						        id: payment_mode
						        on_release: Factory.PaymentModeDropDown().open(self)
						    
						BoxLayout:
							CustomPaymentLabel:
								size_hint_x: 0.2
						        text: "Card Four Digits"
						    TextInput:
						    	size_hint_y: 0.55
						    	size_hint_x: 0.2
						    	font_size: 20
						    	id: card_four_digit
						BoxLayout:
							CustomPaymentLabel:
								size_hint_x: 0.2
						        text: "Amount"
						    TextInput:
						    	size_hint_y: 0.55
						    	size_hint_x: 0.2
						    	font_size: 20
						    	id: amount
						BoxLayout:
							size_hint_y: 0.4
						BoxLayout:
							size_hint_y: 1
							BoxLayout:
								size_hint_x: 0.2
							BoxLayout:
								CustomSaveButton:
				            		size_hint_y: 0.5
				            		on_press: root.save()

				            	BoxLayout:
				            	CustomCancelButton:
				            		size_hint_y: 0.5
				            		on_press: root.cancel()
				            BoxLayout:
				            	size_hint_x: 0.2

		        
	        BoxLayout:
	        	size_hint_x: 0.3
		

<Manager>:
	id: screen_manager
	main_page: main_screen
	customer_list: customer_list_screen
	customer: customer_screen
	supplier: supplier_screen
	supplier_list: supplier_list_screen
	item: item_screen
	item_list: item_list_screen
	tax: tax_screen
	tax_list: tax_list_screen
	sale: sale_screen
	purchase: purchase_screen
	stock_list: stock_list_screen
	stock: stock_screen
	payment: payment_screen
	MainPage:
		id: main_screen
		name: 'main_page'
		manager: screen_manager

	CustomerList:
		id: customer_list_screen
		name: 'customer_list'
		manager: screen_manager

	Customer:
		id: customer_screen
		name: 'customer'
		manager: screen_manager

	SupplierList:
		id: supplier_list_screen
		name: 'supplier_list'
		manager: screen_manager

	Supplier:
		id: supplier_screen
		name: 'supplier'
		manager: screen_manager

	ItemList:
		id: item_list_screen
		name: 'item_list'
		manager: screen_manager

	Item:
		id: item_screen
		name: 'item'
		manager: screen_manager

	TaxList:
		id: tax_list_screen
		name: 'tax_list'
		manager: screen_manager

	Tax:
		id: tax_screen
		name: 'tax'
		manager: screen_manager

	SaleList:
		id: sale_list_screen
		name: 'sale_list'
		manager: screen_manager

	Sale:
		id: sale_screen
		name: 'sale'
		manager: screen_manager

	PurchaseList:
		id: purchase_list_screen
		name: 'purchase_list'
		manager: screen_manager

	Purchase:
		id: purchase_screen
		name: 'purchase'
		manager: screen_manager

	StockList:
		id: stock_list_screen
		name: 'stock_list'
		manager: screen_manager

	Stock:
		id: stock_screen
		name: 'stock'
		manager: screen_manager

	PaymentList:
		id: payment_list_screen
		name: 'payment_list'
		manager: screen_manager

	Payment:
		id: payment_screen
		name: 'payment'
		manager: screen_manager