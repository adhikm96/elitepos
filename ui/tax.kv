<TaxTypeDropDown>:
    on_select: 
    	app.root.ids.tax_screen.ids.tax_type.text = "{}".format(args[0].tax_type)
        

<TaxGrid@GridLayout>:
	size_hint: 1.2,1.2
	size_hint_y: 0.6
	cols:3
	CustomGridButton:
		text: root.name or ""
	    on_press:  root.line_click()
	CustomGridButton:
		text: root.tax_type or ""
	CustomGridButton:
		text: root.percent or ""

<TaxList>
	tx: tx
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		padding: 20
		orientation: "vertical"
		BoxLayout:
			orientation: "vertical"
			BoxLayout:
				spacing: 5
				size_hint_y: 0.06
				CustomListTitle:
					text: "Tax"
					
				CustomListButton:
					text: "Back"
					on_press:root.manager.current= 'main_page'
					on_press: root.manager.transition = SlideTransition(direction="right")
				CustomListButton:
					text: "Add New"
					on_press:root.manager.current= 'tax'
					on_press: root.manager.transition = SlideTransition(direction="left")
					
			BoxLayout:
				size_hint_y: 0.1
				CustomListLabel:
					text: "Tax Name"				
				CustomListLabel:
					text: "Tax Type"
				CustomListLabel:
					text: "Percentage"
					
			CustomListBoxLayout:
				RecycleView:
					id: tx
					viewclass: 'TaxGrid'
					CustomListRecycleGridLayout:

<Tax>:
	name: name
	percent: percent
	tax_type: tax_type
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		orientation: "horizontal"
		BoxLayout:
			orientation: "vertical"
			padding: 20
			spacing: 20
		    BoxLayout:
				size_hint_y: 0.08
				CustomBackButton:
					size_hint_x: 0.15
					size_hint_y: 1.4
					on_press:root.manager.current= 'tax_list'	
					on_press: root.manager.transition = SlideTransition(direction="right")
				Label:
			CustomLineBoxLayout:
				orientation: "vertical"
				BoxLayout:
					padding: 20
					size_hint_y: 0.2
				    Label:
						size_hint_y: 4
						size_hint_x: 0.2
				        font_size: 30
				        text: "Tax"
				        text_size: self.size
				        bold: True
				        italic: True
				        color: 0,0,0,1
				BoxLayout:
					padding: 20
					orientation: "vertical"
					BoxLayout:
						size_hint_y: 0.2
						Label:
							size_hint_y: 2
							size_hint_x: 0.2
					        font_size: 20
					        text: "Tax Name"
					        text_size: self.size
					        bold: True
					        color: 0,0,0,1
					    TextInput:
					    	size_hint_y: 1.7
					    	size_hint_x: 0.2
					    	font_size: 20
					    	id: name
					    	write_tab: False

					BoxLayout:
						size_hint_y: 0.5
						Label:
							size_hint_y: 2
							size_hint_x: 1
					        font_size: 20
					        text: "Tax Type"
					        text_size: self.size
					        bold: True
					        color: 0,0,0,1
					    Button:
					    	canvas:
						        Color:
						            rgba: 0, 0, 0, 0.8
						        Line:
						            width: 1
						            rectangle: self.x, self.y, self.width, self.height
							background_color: 0, 0, 0, 0.1
							color: 0,0,0,1
					        id: tax_type
					        text: 'Select'
					        on_release: Factory.TaxTypeDropDown().open(self)
					        size_hint_y: None
					        height: 40
				
					BoxLayout:
						size_hint_y: 0.5
						Label:
							size_hint_y: 0.35
							size_hint_x: 0.2
					        font_size: 20
					        text: "Percentage"
					        text_size: self.size
					        bold: True
					        color: 0,0,0,1
					    TextInput:
					    	size_hint_y: 0.7
					    	size_hint_x: 0.2
					    	font_size: 20
					    	id: percent
					    	write_tab: False

					BoxLayout:
						BoxLayout:
							size_hint_x: 0.4
						BoxLayout:
							CustomSaveButton:
			            		size_hint_y: 0.4
			            		on_press: root.save()

			            	BoxLayout:

			            	CustomCancelButton:
			            		size_hint_y: 0.4
			            		on_press: root.cancel()
			            BoxLayout:
			            	size_hint_x: 0.4

	        BoxLayout:
				orientation: "vertical"
				size_hint_y: 0.8
        BoxLayout:
        	size_hint_x: 0.5