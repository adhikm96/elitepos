<PaymentTypeDropDown>:
    on_select:
        app.root.ids.payment_screen.ids.payment_type.text = '{}'.format(args[1])  

<PaymentModeDropDown>:
    on_select:
        app.root.ids.payment_screen.ids.payment_mode.text = '{}'.format(args[1])  
<PaymentGrid@GridLayout>:
	size_hint: 1.2,1.2
	size_hint_y: 0.6
	cols:5
	CustomGridButton:
		text: root.transaction_ref  or ""
	    on_press: self.parent.parent.parent.parent.parent.parent.parent.manager.current= 'payment'
	    on_press: self.parent.parent.parent.parent.parent.parent.parent.manager.transition = SlideTransition(direction="left")
	CustomGridButton:
		text: root.card_four_digit or ""
	CustomGridButton:
		text: root.amount or ""
	CustomGridButton:
		text: root.payment_type or ""
	CustomGridButton:
		text: root.mode_of_payment or ""

<PaymentList>
	pay: pay
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		padding: 20
		orientation: "vertical"
		BoxLayout:
			orientation: "vertical"
			BoxLayout:
				spacing: 5
				size_hint_y: 0.06
				CustomListTitle:
					text: "Payment"
					
				CustomListButton:
					text: "Back"
					on_press:root.manager.current= 'main_page'
					on_press: root.manager.transition = SlideTransition(direction="right")
				CustomListButton:
					text: "Add New"
					on_press:root.manager.current= 'payment'
					on_press: root.manager.transition = SlideTransition(direction="left")
					
			BoxLayout:
				size_hint_y: 0.1
				CustomListLabel:
					text: "Transaction Reference"				
				CustomListLabel:
					text: "Card Four Digit"
				CustomListLabel:
					text: "Amount"
				CustomListLabel:
					text: "Payment Type"
				CustomListLabel:
					text: "Mode od Payment"
					
			CustomListBoxLayout:
				RecycleView:
					id: pay
					viewclass: 'PaymentGrid'
					CustomListRecycleGridLayout:

<CustomPaymentDateTimeLabel@Label>:
	size_hint_y: 3.5
	size_hint_x: 0.2
    font_size: 20
    text_size: self.size
    bold: True
    color: 0,0,0,1

<CustomPaymentLabel@Label>:
	size_hint_y: 0.35
    font_size: 20
    text_size: self.size
    bold: True
    color: 0,0,0,1

<CustomePaymentButton@Button>:
	canvas:
        Color:
            rgba: 0, 0, 0, 0.8
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height
	background_color: 0, 0, 0, 0.1
	color: 0,0,0,1
    text: 'Select'
    size_hint_y: None
    height: 40

<Payment>:
	transaction_ref: transaction_ref
	card_four_digit: card_four_digit
	amount: amount
	canvas:
		Color:
		    rgba: (1,1,1,1) 
		Rectangle:
		    pos: self.pos
		    size: self.size
	CustomBoxLayout:
		orientation: "horizontal"
		padding: 20
		spacing: 20
		BoxLayout:
			orientation: "vertical"
		    BoxLayout:
				size_hint_y: 0.05
				CustomBackButton:
					size_hint_x: 0.15
					size_hint_y: 1.5
					bold: True
					on_press:root.manager.current= 'payment_list'	
					on_press: root.manager.transition = SlideTransition(direction="right")
				Label:
			BoxLayout:
				size_hint_y: 0.03
			CustomLineBoxLayout: 
				orientation: "vertical"
				BoxLayout:
					padding: 20
					size_hint_y: 0.14
				    Label:
						size_hint_y: 3
						size_hint_x: 0.2
				        font_size: 30
				        text: "Payment"
				        text_size: self.size
				        bold: True
				        italic: True
				        color: 0,0,0,1
				BoxLayout:
					padding: 20
					orientation: "vertical"
				    BoxLayout:
				    	size_hint_y: 0.1
						CustomPaymentDateTimeLabel:
					        text: "Date:"
					    CustomPaymentDateTimeLabel:
					        text: str(datetime.datetime.now().strftime("%d-%m-%y"))
					        id: root.p_date
					    CustomPaymentDateTimeLabel:
					        text: "Time"
					    CustomPaymentDateTimeLabel:
					        text: root.p_time or ""
					        id: p_time
					BoxLayout:
						CustomPaymentLabel:
							size_hint_x: 0.2
					        text: "Trasaction Ref."
					    TextInput:
					    	size_hint_y: 0.60
					    	size_hint_x: 0.2
					    	font_size: 20
					    	id: transaction_ref
					    	write_tab: False

					BoxLayout:
						CustomPaymentLabel:
							size_hint_x: 1
					        text: "Payment Type"
					    CustomePaymentButton:
					        id: payment_type
					        on_release: Factory.PaymentTypeDropDown().open(self)

					BoxLayout:
						CustomPaymentLabel:
							size_hint_x: 1
					        text: "Mode Of Payment"
					    CustomePaymentButton:
					        id: payment_mode
					        text: 'Select'
					        on_release: Factory.PaymentModeDropDown().open(self)
					    
					BoxLayout:
						CustomPaymentLabel:
							size_hint_x: 0.2
					        text: "Card Four Digits"
					    TextInput:
					    	size_hint_y: 0.60
					    	size_hint_x: 0.2
					    	font_size: 20
					    	id: card_four_digit
					    	write_tab: False
					BoxLayout:
						CustomPaymentLabel:
							size_hint_x: 0.2
					        text: "Amount"
					    TextInput:
					    	size_hint_y: 0.60
					    	size_hint_x: 0.2
					    	font_size: 20
					    	id: amount
					    	write_tab: False
					BoxLayout:
						size_hint_y: 0.4
					BoxLayout:
						size_hint_y: 1
						BoxLayout:
							size_hint_x: 0.5
						BoxLayout:
							CustomSaveButton:
			            		size_hint_y: 0.7
			            		on_press: root.save()

			            	BoxLayout:
			            	CustomCancelButton:
			            		size_hint_y: 0.7
			            		on_press: root.cancel()
			            BoxLayout:
			            	size_hint_x: 0.5

	        BoxLayout:
				orientation: "vertical"
				size_hint_y: 0.3
        BoxLayout:
        	size_hint_x: 0.5

<PaymentPopup>:
	BoxLayout:
		canvas:
			Color:
			    rgba: (1,1,1,1) 
			Rectangle:
			    pos: self.pos
			    size: self.size
		CustomBoxLayout:
			orientation: "horizontal"
			padding: 20
			spacing: 20
			BoxLayout:
				orientation: "vertical"
			    BoxLayout:
					size_hint_y: 0.05
					CustomBackButton:
						size_hint_x: 0.15
						size_hint_y: 1.4
						bold: True	
						on_press: root.dismiss()
					Label:
				BoxLayout:
					size_hint_y: 0.03
				CustomLineBoxLayout: 
					orientation: "vertical"
					
					BoxLayout:
						padding: 20
						orientation: "vertical"
					    BoxLayout:
					    	size_hint_y: 0.1
							CustomPaymentDateTimeLabel:
						        text: "Date:"
						    CustomPaymentDateTimeLabel:
						        text: str(datetime.datetime.now().strftime("%d-%m-%y"))
						    CustomPaymentDateTimeLabel:
						        text: "Time"
						    CustomPaymentDateTimeLabel:
						        text: root.tm or ""
						BoxLayout:
							CustomPaymentLabel:
								size_hint_x: 0.2
						        text: "Trasaction Ref."
						    TextInput:
						    	size_hint_y: 0.55
						    	size_hint_x: 0.2
						    	font_size: 20
						    	id: transaction_ref
						    	write_tab: False

						BoxLayout:
							CustomPaymentLabel:
								size_hint_x: 1
						        text: "Payment Type"
						    CustomePaymentButton:
						        id: payment_type
						        on_release: Factory.PaymentTypeDropDown().open(self)

						BoxLayout:
							CustomPaymentLabel:
								size_hint_x: 1
						        text: "Mode Of Payment"
						    CustomePaymentButton:
						        id: payment_mode
						        on_release: Factory.PaymentModeDropDown().open(self)
						    
						BoxLayout:
							CustomPaymentLabel:
								size_hint_x: 0.2
						        text: "Card Four Digits"
						    TextInput:
						    	size_hint_y: 0.55
						    	size_hint_x: 0.2
						    	font_size: 20
						    	id: card_four_digit
						    	write_tab: False

						BoxLayout:
							CustomPaymentLabel:
								size_hint_x: 0.2
						        text: "Amount"
						    TextInput:
						    	size_hint_y: 0.55
						    	size_hint_x: 0.2
						    	font_size: 20
						    	id: amount
						    	write_tab: False

						BoxLayout:
							size_hint_y: 0.4
						BoxLayout:
							size_hint_y: 1
							BoxLayout:
								size_hint_x: 0.2
							BoxLayout:
								CustomSaveButton:
				            		size_hint_y: 0.5
				            		on_press: root.save()

				            	BoxLayout:
				            	CustomCancelButton:
				            		size_hint_y: 0.5
				            		on_press: root.cancel()
				            BoxLayout:
				            	size_hint_x: 0.2

		        
	        BoxLayout:
	        	size_hint_x: 0.3
		
